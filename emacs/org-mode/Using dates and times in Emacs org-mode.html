<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>Using dates and times in Emacs org-mode</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2007/10/21 11:34:54 AM"/>
<meta name="author" content="Charles Cave"/>

 <style type="text/css">
html {   font-family: Verdana, Times, serif;
         font-size: 10pt;
         margin-left: 40pt;
         margin-right: 60pt;
     }
pre  {   border: 1pt solid #AEBDCC;
         background-color: #F3F5F7;
         padding: 5pt;
         font-family: courier, monospace;
         font-size: 10pt;
         margin-left: 45pt;
         margin-right: 45pt;
  }

p,li  {  margin-left: 1.5 cm;
         margin-right: 1.5 cm;
      }

.author, .date {
         font-size: 8pt;
         margin-left: 0pt;
   }

img {
        border:none;
        padding-top: 1em;
        padding-bottom: 1em;
        padding-left: +0em;
}

h1  {   color: darkblue; 
        background-color: #eeeeee;
        border-bottom: #bbbbbb 1px dashed;
    }
 </style>

</head><body>

<h1 class="title">Using dates and times in Emacs org-mode</h1>
A tutorial on working with dates and times in org-mode 


<h2>Table of Contents</h2>
<ul>
<li><a href="#sec-1">1 Org-mode and personal productivity</a></li>
<li><a href="#sec-2">2 Brief review of org-mode </a>
<ul>
<li><a href="#sec-3">2.1 User configurable tags</a></li>
<li><a href="#sec-4">2.2 To do flags</a></li>
<li><a href="#sec-5">2.3 Dates</a></li>
</ul>
</li>
<li><a href="#sec-6">3 Exploring Dates</a>
<ul>
<li><a href="#sec-7">3.1 Simple date format</a></li>
<li><a href="#sec-8">3.2 Date and time format</a></li>
<li><a href="#sec-9">3.3 Date Range</a></li>
</ul>
</li>
<li><a href="#sec-10">4 Agenda View</a></li>
<li><a href="#sec-11">5 Timeline</a></li>
<li><a href="#sec-12">6 Repeating events</a></li>
<li><a href="#sec-13">7 Deadlines and Scheduled Dates </a>
<ul>
<li><a href="#sec-14">7.1 Deadline Dates</a></li>
<li><a href="#sec-15">7.2 Repeating Deadlines</a></li>
<li><a href="#sec-16">7.3 Sparse Tree of Deadlines</a></li>
<li><a href="#sec-17">7.4 Scheduled Date</a></li>
</ul>
</li>
<li><a href="#sec-18">8 Editing Dates</a>
<ul>
<li><a href="#sec-19">8.1 Date Selector Tool</a></li>
</ul>
</li>
<li><a href="#sec-20">9 Examples</a></li>
<li><a href="#sec-21">10 Command Summary</a></li>
</ul>

<h2 id="sec-1">1 Org-mode and personal productivity</h2>


<p>
org-mode is an Emacs package for creating outlines with enhancements
to make it a powerful tool for personal productivity, planning and
simple project management. org-mode is an appointment book, calendar and
to-do list manager.
</p>
<p>
This tutorial focuses on the date and time stamp functionality and how
this works with the agenda view. 
</p>

<h2 id="sec-2">2 Brief review of org-mode </h2>


<p>
The basics of an org-mode file are lines beginning with one or more
asterisks to indicate an outline entry (or heading), with the number
of asterisks indicating the outline level. Text associated with an
outline entry follows the line beginning with asterisks until the
next outline entry.
</p>
<p>
The simplest outline looks like this:
</p>
<p>
<pre>
 * Things to do at work
 ** Weekly management meetings
 *** Tuesday department meeting (10-11am)
 *** Friday afternoon team meeting (3-4pm)
 * Phone calls to make
 ** Susan - regarding contract
</pre>
</p>
<p>
org-mode makes good use of color and font decorations to make
this very simple text readable.
</p>
<p>
<img src="simple_outline.png"/>
</p>
<p>
org-mode enhances the outline entries with the following features of
user configurable tags, to-do flags and dates.
</p>

<h3 id="sec-3">2.1 User configurable tags</h3>


<p>
These are useful for defining places where the work can be done,
contexts, type of work, people involved , or special resources. For
example: HOME, OFFICE, PHONE (identifying items requiring a phone
call), BOSS (tagging items to discuss with your manager) and SUSAN
(tagging items delegated to SUSAN).
</p>
<p>
Tags appear at the end of an entry with surrounding colons.  Tags are
assigned using the <code>C-c C-c</code> command where a window is displayed showing
the tags configured in the line beginning <code>#+TAGS</code>. Each tag can be
followed with a short-cut for fast selection. 
</p>
<p>
<img src="tag_selection.png"/>
</p>
<p>
Tags are used to generate lists of items containing one or more
specified tags. For example, a list of phone calls that need to be
made can be generated by searching for the PHONE tag.  These lists by
context are known as Next Actions in David Allen's Getting Things Done
methodology.
</p>

<h3 id="sec-4">2.2 To do flags</h3>


<p>
An outline entry can be marked as TODO using the <code>C-c C-t</code> command.
This tag appears at the beginning of an entry in a different colour.
</p>
<p>
<img src="todo.png"/>
</p>
<p>
To-do flags are used to generate a  "to-do list" sparse tree using the
<code>C-c C-v</code> command, or in a agenda buffer described later in this tutorial.
</p>

<h3 id="sec-5">2.3 Dates</h3>


<p>
An item can be marked with a date indicating when the activity should
take place. In addition dates can be assigned to record scheduled
start dates, deadlines and ranges of dates. This functionality allows org-mode
to be used as a planner, appointment book and simple project
management tool.
</p>
<p>
The user manual describes dates and times in section 8, titled
"Timestamps". I think this name is confusing, because a timestamp is a
combination of date and time recording when an event occurred.  I will
not use the word timestamp again in this tutorial!
</p>
<p>
Dates can appear anywhere in the headline or body of the outline
entry. The following two entries are functionally equivalent:
</p>
<p>
<pre>
 * Win the lottery &lt;2007-10-21 Sun&gt;
 * Win the lottery again
    &lt;2007-10-21 Sun&gt;
</pre>
</p>
<p>
Outline entries can be tagged with several combinations of dates,
times and ranges for display in agendas, timelines, or a
"sparse-tree" of items approaching a deadlines.
</p>

<h2 id="sec-6">3 Exploring Dates</h2>


<p>
Now let's explore these various date and times.
</p>

<h3 id="sec-7">3.1 Simple date format</h3>


<p>
A simple date is specified in a special format enclosed in angle or
square brackets, for example, &lt;2007-10-21 Sun&gt; or 
[2007-10-21 Sun].
</p>
<p>
The angle bracket notation is for <b>active</b> dates which will
appear in agendas and timelines. The square bracket notation is for
<b>inactive</b> dates for recording when things happened, and will not
appear in agendas or timelines.
</p>
<p>
The <code>C-c .</code> command is used to prompt for an active date whereas the
<code>C-c !</code> command prompts for an inactive date. The procedures for
choosing a date are the same for both types of dates.
</p>
<p>
An Emacs Calendar frame is displayed above the mini-buffer.
</p>
<p>
<img src="emacs_calendar.png"/>
</p>
<p>
The response to this prompt is combined with the date currently
selected in the calendar prompt. Since the calendar is displayed with
today's date being active, hitting Enter will choose today's date.
</p>
<p>
The date currently displayed in the calendar prompt is referred to as
the <b>default date</b> and can be changed with the following navigation
commands:
</p>
<ul>
<li>
<b>Shift-Right arrow</b> to go forward a day. The new date can be seen in
the calendar display.
</li>
<li>
<b>Shift-Left arrow</b> to go back a day. The new date can be seen in
the calendar display.
</li>
<li>
<b>Shift-Up arrow</b> to go back a week. The new date can be seen in
the calendar display.
</li>
<li>
<b>Shift-Down arrow</b> to go forward a week. The new date can be seen in
the calendar display.
</li>
<li>
<b>&lt;</b> scroll the calendar display back by one month - <b>&gt;</b> scroll the calendar display forward by one month
</li>
<li>
. Go to today. Make sure the cursor is in the calendar frame for
this to work.

</li>
</ul>
<p>Here are some of the many ways you can respond to the prompt and how
it modifies the default date. Assume the default date is Sunday, 21st
October 2007.
</p>
<ul>
<li>
<b>10</b> produces 10th October 2007. A single number is interpreted as
the day of the default month.
</li>
<li>
<b>Tue</b> produces 23rd October.  Interpreted as the date nearest the
supplied day.

</li>
</ul>
<p>A relative date can be given as the first thing in the input by typing
a plus (+) or minus (-) sign, a number and a letter (d, w, m, or y)
indicating a change in days, weeks, months or years to today's date. 
</p>
<p>
A double plus or double minus sign makes the input relative to the
default date.
</p>
<p>
Here are the results of the insertion of inactive dates with various
inputs:
</p>
<ul>
<li>
No response to prompt: <span class="timestamp">2007-10-21 Sun</span> (Today's date)
</li>
<li>
+1 <span class="timestamp">2007-10-22 Mon</span>
</li>
<li>
+1w <span class="timestamp">2007-10-28 Sun</span>
</li>
<li>
+1m <span class="timestamp">2007-11-21 Wed</span>
</li>
<li>
-1 <span class="timestamp">2007-10-20 Sat</span>

</li>
</ul>
<p>After you have answered the prompt, a date string is inserted into the
buffer.
</p>
<p>
<img src="date1.png"/>
</p>

<h3 id="sec-8">3.2 Date and time format</h3>


<p>
A time can be added to a date using the methods described in the
previous section but adding the time in HH:MM format. For example,
entering <code>+1 11:00</code> gives <span class="timestamp">2007-10-22 Mon 11:00</span>.
</p>
<p>
Events with a definite ending time can be recording using two times
separated with a hyphen, for example <span class="timestamp">2007-10-22 Mon 11:00-12:00</span>.
</p>

<h3 id="sec-9">3.3 Date Range</h3>


<p>
A range of dates can be recorded using two dates separated by a
hyphen. These can be entered by entering the first date with <code>C-c .</code>,
then immediately running the <code>C-c .</code> command again.
</p>

<h2 id="sec-10">4 Agenda View</h2>


<p>
The agenda gives an overview of date and time tagged headlines, sorted
chronologically. 
</p>
<p>
<img src="cal1.png"/>
</p>
<p>
Let's see how the various dates and times from the buffer above are
displayed in the agenda.
</p>
<p>
<img src="agenda1.png"/>
</p>
<p>
The headlines of the items are displayed in the appropriate day. 
</p>
<ul>
<li>
Items spanning several days appear on each day with a repetition
count. For example, <code>(1/3): James on Leave</code>.
</li>
<li>
Items with times appear before non-timed events, for example,
Tuesday.
</li>
<li>
Days with no events still show the date.
</li>
<li>
The file name is shown as a prefix, in this case <code>sample2</code>. This can
be changed by include the #+CATEGORY: tag at the beginning of the
buffer to give a meaningful name.

</li>
</ul>
<h2 id="sec-11">5 Timeline</h2>


<p>
A timeline is another view of the date and time-stamped items in the
current file. The main purpose of a timeline is to give an overview
over events in a project.  
</p>
<p>
A timeline is generated from the 
<code>Org &gt; Special Views Current File &gt; Timeline</code> menu item or issuing the
agenda command <code>C-c a L</code>. 
</p>
<p>
<img src="timeline.png"/>
</p>


<h2 id="sec-12">6 Repeating events</h2>


<p>
Some tasks need to be repeated at regular intervals - daily, weekly,
fortnightly, monthly, quarterly and annually. Items can be made to
repeat in the agenda view by including a repeater directive at the
end of the date. This has the format of a plus sign, a number and a
letter indicating a unit of time: days (d), weeks (w), months (m)
and years (y).
</p>
<p>
Therefore, the weekly meeting entries can look like:
</p>
<p>
<pre>
 *** Tuesday department meeting 
 &lt;2007-10-23 Tue 10:00-11:00 +1w&gt;
 *** Friday afternoon team meeting
 &lt;2007-10-26 Fri 15:00-16:00 +1w&gt;
</pre>
</p>
<p>
Viewing the agenda and scrolling forward into future weeks will show
the date entries.
</p>
<p>
<img src="repeat_future.png"/>
</p>

<h2 id="sec-13">7 Deadlines and Scheduled Dates </h2>


<p>
A time stamp can be preceded with a special keyword to facilitate
planning your work.
</p>

<h3 id="sec-14">7.1 Deadline Dates</h3>


<p>
A task, most likely flagged with TODO, is supposed to finish by a
deadline date.  Work on the task can begin as soon as practical, but
must be finished by the deadline date.
</p>
<p>
A deadline date is entered with the <code>C-c C-d</code> command. The method of
entering dates is the same as described previously, but the end result
is the additional keyword <code>DEADLINE:</code> preceding the date:
</p>
<p>
<img src="deadlines.png"/>
</p>
<p>
The list above shows an item due today (Sunday report) and an overdue
item (Weekly Report) due last Friday. Here is the agenda generated on
Sunday 21st October.
</p>
<p>
<img src="agenda_deadlines.png"/>
</p>
<p>
An item with a deadline date is displayed in red on the deadline date
with a prefix of "Deadline:". 
</p>
<p>
If the deadline is within the number of days set by the 
<code>ord-deadline-warning-days</code> variable, the information is repeated on
today's date with the number of days until the deadline, for example,
"In 5 d". 
</p>
<p>
When an item is overdue, the entry is shown in red with the number of
days overdue, but shown as a negative number.
</p>
<p>
If you would to have a longer or shorter warning about an
upcoming deadline, include the interval preceded with a minus sign at
the end of the date string. The following entry will generate an item
in the agenda with the number of days until the 31st January 2008.
</p>
<p>
<pre>
 * Product Sofware Release Date
   DEADLINE: &lt;2008-01-31 Thu -6m&gt;
</pre>
</p>
<p>
The agenda line generated today from the entry above is:
</p>
<p>
<pre>
  Planner:    In 102 d.:  Product Sofware Release Date
</pre>
</p>

<h3 id="sec-15">7.2 Repeating Deadlines</h3>


<p>
When a task with a deadline, such as a weekly or a monthly report,
needs to be tracked, it can be set up with a TODO tag and a repeater
interval. A weekly report due on midday each Monday could be set up as
follows:
</p>
<p>
<pre>
 ** Submit Weekly Report
   DEADLINE: &lt;2007-10-22 Mon 12:00 +1w&gt;
</pre>
</p>
<p>
This will display each Monday on the agenda. If the entry is changed
to a TODO item, work on the report can be tracked.
</p>
<p>
<pre>
 ** TODO Submit Weekly Report
    DEADLINE: &lt;2007-10-22 Mon 12:00 +1w&gt;
</pre>
</p>
<p>
When the TODO item is closed with <code>C-c C-t</code> a window is opened where
you can record a note about closing the task.  A date and time stamp
is recorded. Note that the date has been increased by the repeater
interval, the item is still in the TODO state, and the note is
recorded under the item.
</p>
<p>
<img src="repeater.png"/>
</p>

<h3 id="sec-16">7.3 Sparse Tree of Deadlines</h3>


<p>
The deadlines in the current buffer can be checked with the <code>C-c C-w</code>
command. This displays the items that are past due or will become past
due within <code>org-deadline-warning-days</code>. Just enough of the buffer is
displayed to give context to the items. This feature is not normally
used, so the keybinding may be removed at a later date.
</p>
<p>
<img src="deadline2.png"/>
</p>

<p>
With a numeric prefix, check deadlines that fall within that number of
days. For example, <code>C-30 C-c C-w</code> will display all deadlines that fall
within 30 days. This can also be entered as <code>Esc 30 C-c C-w</code>.
</p>
<p>
<img src="deadline30.png"/>
</p>

<h3 id="sec-17">7.4 Scheduled Date</h3>


<p>
A scheduled date is when you plan to start working on a task. The item
will be listed in the agenda on the scheduled date. A reminder will
also be given when a scheduled date is in the past, until the item is
marked as done. A date is marked as scheduled using the <code>C-c C-s</code> command.
</p>
<p>
Do not confuse a scheduled date with an event marked with a specific
date. Although you use the verb schedule to say "I have scheduled the
weekly meeting", this usage of scheduled has a specific meeting.
</p>
<p>
For example, I can schedule an item to pay my credit card on the 21st
of the month, because I get paid on the 20th of each month. An entry
could be set up as:
</p>
<p>
<pre>
 ** Pay credit card statement
    SCHEDULED: &lt;2007-10-21 Sun +1m&gt;
</pre>
</p>
<p>
This will be displayed as:
</p>
<p>
<img src="schedule1.png"/>
</p>
<p>
Scheduled dates and Deadlines can both be supplied for an entry.
The earliest day of the month I can pay my credit card is the 21st of
the month, however the payment is due by the last day of the month.
Therefore I can enhance the entry with a deadline:
</p>
<p>
<pre>
 ** TODO Pay credit card statement
    SCHEDULED: &lt;2007-10-21 Sun +1m&gt;
    DEADLINE: &lt;2007-10-30 Tue +1m&gt;
</pre>
</p>
<p>
Once the item is marked DONE, both dates are advanced by the repeat
interval to next month.
</p>
<p>
<img src="schedule2.png"/>
</p>
<p>
The agenda display above shows an event scheduled for last week and
this is highlighted in red with how many days overdue.
</p>

<h2 id="sec-18">8 Editing Dates</h2>


<p>
A date can be edited in several ways. The date can be scrolled forward
or backwards by positioning the cursor anyway inside the date string
and entering <b>Shift-Right Arrow</b> to go forward a day, or 
<b>Shift-Left Arrow</b> to go back a day.
</p>
<p>
Individual components of a date (Year, month and day) can be changed
by positioning the cursor on the number to be changed and clicking 
<b>Shift Up Arrow</b> or <b>Shift Down Arrow</b> to adjust the value. The day of
the week corresponding to the date will be adjusted accordingly.
</p>
<p>
A date can be chosen with the Emacs calendar by positioning the cursor
anywhere in the date and entering the <code>C-c .</code> command. The date can be
edited according to the methods described in the earlier Simple Date
Format section.
</p>

<h3 id="sec-19">8.1 Date Selector Tool</h3>


<p>
The <code>C-c &gt;</code> command opens the Emacs calendar window displaying the
date under the cursor. For example, if the cursor is over the date
string  &lt;2007-01-01 Mon&gt;, issuing the command will display a calendar
with January 2007 in the middle. You can navigate using the commands
described in the previous section then choose a date with a
mouse-click or pressing Enter.
</p>
<p>
The date you have chosen is now remembered to be pasted with the 
<code>C-c &lt;</code> command. Repeating the command will paste multiple copies of
the date. This could be useful if you need to apply the same date to
several headlines.
</p>


<h2 id="sec-20">9 Examples</h2>


<p>
A lot of functionality can be gained using dates, repeater intervals,
deadline warnings, scheduled and deadline dates. Some uses are:
Birthdays, Insurance Policies due dates, Home Maintenance tasks of a
repetitive nature.
</p>

<h2 id="sec-21">10 Command Summary</h2>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<COL align="left"></COL><COL align="left"></COL>
<thead>
<tr><th>Command</th><th>Details</th></tr>
</thead>
<tbody>
<tr><td><b>Inserting dates</b></td><td></td></tr>
<tr><td>C-c .</td><td>Prompt for active date</td></tr>
<tr><td>C-c !</td><td>Prompt for inactive date</td></tr>
<tr><td>C-c C-d</td><td>Enter a DEADLINE date</td></tr>
<tr><td>C-c C-s</td><td>Enter a SCHEDULED date</td></tr>
<tr><td></td><td></td></tr>
<tr><td><b>Date repeater</b></td><td></td></tr>
<tr><td><span class="timestamp">2007-10-24 Wed +1w</span></td><td>Repeat every Wednesday</td></tr>
<tr><td><span class="timestamp">2007-10-01 Mon +1m</span></td><td>Repeat on 1st day every month</td></tr>
<tr><td></td><td></td></tr>
<tr><td><b>Date warning</b></td><td></td></tr>
<tr><td><span class="timestamp">2007-10-24 Wed -2m</span></td><td>Start warning 2 months before</td></tr>
<tr><td><span class="timestamp">2007-10-24 Wed -20d</span></td><td>Start warning 20 days before</td></tr>
<tr><td></td><td></td></tr>
<tr><td><b>Calendar Navigation</b></td><td></td></tr>
<tr><td>Shift-RIGHT</td><td>Go forward a day</td></tr>
<tr><td>Shift-LEFT</td><td>Go backward a day</td></tr>
<tr><td>Shift-UP</td><td>Go to previous week</td></tr>
<tr><td>Shift-DOWN</td><td>Go to next week</td></tr>
<tr><td>&lt;</td><td>Scroll calendar back 1 month</td></tr>
<tr><td>&gt;</td><td>Scroll calendar forward 1 month</td></tr>
<tr><td>.</td><td>Go to Today</td></tr>
<tr><td></td><td></td></tr>
<tr><td><b>Prompt responses</b></td><td></td></tr>
<tr><td>15 (Number)</td><td>Date of current month</td></tr>
<tr><td>Tue (Day name)</td><td>Date of nearest day specified</td></tr>
<tr><td>HH:MM</td><td>Enter a time</td></tr>
<tr><td>+2d ( or w, m, y)</td><td>Two days (weeks, months, years)</td></tr>
<tr><td></td><td>after today's date</td></tr>
<tr><td>++2d (or w, m, y)</td><td>Two days (weeks, months, years)</td></tr>
<tr><td></td><td>after the default date</td></tr>
<tr><td>+3tue</td><td>Third Tuesday of the month</td></tr>
<tr><td></td><td>(new in 5.13c)</td></tr>
</tbody>
</table>


<p>
<HR>
</p>

<p class="author"> Author: Charles Cave
<a href="mailto:charlesweb@optusnet.com.au?Subject=org-mode date tutorial">Send Email</a>
</p>
<p class="date"> Date: 2007/10/24 (Tuesday) 10:39:49 PM</p>

</body>
</html>
